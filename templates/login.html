<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ì¸</title>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <style>
        /* CSSëŠ” ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€ */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        body { background-image: url("../static/images/title/title.png"); background-size: 120%; background-repeat: no-repeat; background-position: center; font-family: 'Noto Sans KR', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; position: relative; overflow: hidden; color: #fff; animation: background-flow 60s linear infinite alternate; }
        @keyframes background-flow { from { background-position: 0 0; } to { background-position: 0 100%; } }
        body::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.4); z-index: -1; }
        .login-box { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); padding: 40px; border-radius: 12px; box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); width: 350px; text-align: center; position: relative; transform: none; animation: pulse 1.5s infinite ease-in-out; }
        .login-box::before { display: none; }
        .login-box:hover { box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2); animation-play-state: paused; transform: scale(1.02); }
        .login-title { margin-bottom: 30px; color: #fff; font-size: 2em; font-weight: 700; letter-spacing: 2px; border-bottom: 2px solid rgba(255, 255, 255, 0.5); padding-bottom: 10px; }
        .user-input { margin-bottom: 20px; text-align: left; }
        .user-input label { display: block; margin-bottom: 8px; color: rgba(255, 255, 255, 0.8); font-weight: bold; text-transform: uppercase; font-size: 0.9em; }
        .user-input input { width: 100%; padding: 12px; box-sizing: border-box; background-color: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 4px; color: #fff; font-family: 'Noto Sans KR', sans-serif; }
        .login-btn { width: 100%; padding: 12px; background-color: #4a638b; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 18px; font-weight: bold; transition: background-color 0.3s; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); animation: none; }
        .login-btn:hover { background-color: #3b5073; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>

<body>
    <div class="login-box">
        <h2 class="login-title">ë¡œê·¸ì¸</h2>
        <div class="user-input">
            <label for="username">ì•„ì´ë””</label>
            <input type="text" id="playerID_login" name="username">
        </div>
        <div class="user-input">
            <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" id="password_login" name="password">
        </div>
        
        <button id="login-btn" class="login-btn" onclick="handleLoginClick()">LOGIN</button>
        <div onclick="handleSignupClick()" style="cursor: pointer; color:#5d4a3b;">íšŒì›ê°€ì…</div>
        </div>

    <audio id="click-sound" src="{{ url_for('static', filename='images/img_ed/ìµœì¢…í•©ë³¸/ë§ˆìš°ìŠ¤íš¨ê³¼ìŒ.mp3') }}" preload="auto"></audio>
    
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        // ==================== JavaScript ìˆ˜ì • ë¶€ë¶„ ====================

        // ê³µí†µ í´ë¦­ ì‚¬ìš´ë“œ ì¬ìƒ í•¨ìˆ˜
        function playClickSound() {
            const clickSound = document.getElementById('click-sound');
            if (clickSound) {
                clickSound.currentTime = 0;
                clickSound.play();
            }
        }

        // ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬ í•¨ìˆ˜
        function handleLoginClick() {
            playClickSound(); // ë¨¼ì € ì†Œë¦¬ë¥¼ ì¬ìƒ
            
            // 200ms(0.2ì´ˆ) í›„ì— ë¡œê·¸ì¸ ê´€ë ¨ ë¡œì§ ì‹¤í–‰
            setTimeout(() => {
                load_playerData(); 
                startBGM(); 
                alert('ğŸ¶ë°°ê²½ìŒì•…ì„ ë“£ê¸° ìœ„í•´ì„œ ì†Œë¦¬ë¥¼ ì¼œì£¼ì„¸ìš”.ğŸ“¢');
            }, 200); 
        }

        // íšŒì›ê°€ì… í´ë¦­ ì²˜ë¦¬ í•¨ìˆ˜
        function handleSignupClick() {
            playClickSound(); // ë¨¼ì € ì†Œë¦¬ë¥¼ ì¬ìƒ
            
            // 200ms(0.2ì´ˆ) í›„ì— íšŒì›ê°€ì… ê´€ë ¨ ë¡œì§ ì‹¤í–‰
            setTimeout(() => {
                load_game_signup(); 
                startBGM(); 
                alert('ğŸ¶ë°°ê²½ìŒì•…ì„ ë“£ê¸° ìœ„í•´ì„œ ì†Œë¦¬ë¥¼ ì¼œì£¼ì„¸ìš”.ğŸ“¢');
            }, 200);
        }

        // ============================================================

        // ë°°ê²½ìŒì•… ì¬ìƒ ì‹ í˜¸ë¥¼ ë¶€ëª¨ ì°½ìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤.
        function startBGM() {
            window.parent.postMessage('play_bgm', '*');
        }

        function preventGoBack() {
            history.pushState(null, null, location.href);
            alert("ë’¤ë¡œ ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }

        window.onload = function() {
            history.pushState(null, null, location.href);
            window.addEventListener('popstate', preventGoBack);
        };
    </script>
</body>
</html>