<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>컴공이지만 연애는 하고싶어 연애시뮬레이션</title>

    <!--CSS 불러오기 코드-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index_style.css') }}">

    <script>
        // 새 세션을 생성합니다.
        var player_session = {'playerID':NaN, 'username':NaN}
    </script>
</head>
</head>

<body>
    <!---jquery 불러오기 코드-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!--오디오불러오기-->
    <audio id="main-bgm" src="{{ url_for('static', filename='images/img_ed/최종합본/videoplayback.m4a') }}" loop></audio>
    <audio id="new-bgm" src="{{ url_for('static', filename='images/img_ed/최종합본/videoplayback_1.mp3') }}" loop></audio>

    <!---웹 껍데기-->
    <div class="main-container">
        <div class="title-text">
        </div>

        <!--로그인기능 필요시 구현-->
        <div class="login">
        </div>

        <!--게임 불러오기-->
        <iframe id="game-container" src="{{ url_for('game_login') }}" width="1600" height="900" frameborder="0"></iframe>

    </div>

    <script>
        const mainBGM = document.getElementById('main-bgm');
        const newBGM = document.getElementById('new-bgm');

        window.addEventListener('message', function(event) {
            const message = event.data;

            if (message === 'play_bgm') {
                if (mainBGM) {
                    newBGM.pause();
                    mainBGM.play().catch(e => {
                        console.error("배경음악 재생 실패:", e);
                    });
                }
            } else if (message === 'play_new_bgm') {
                if (newBGM) {
                    mainBGM.pause();
                    newBGM.play().catch(e => {
                        console.error("새로운 배경음악 재생 실패:", e);
                    });
                }
            }
        });
    </script>

    <!--JS 불러오기 코드-->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <audio id="click-sound" src="{{ url_for('static', filename='images/img_ed/최종합본/마우스효과음.mp3') }}" preload="auto"></audio>
    <audio id="slip-sound" src="{{ url_for('static', filename='images/img_ed/최종합본/쿵소리.mp3') }}" preload="auto"></audio>
</body>

</html>